---
layout: page
title: "Tags"
permalink: /tags/
---

# Tags

{% comment %}GitHub Pages 환경에서 collections.notes.docs가 비어 보일 때가 있어서 site.notes를 우선 사용{% endcomment %}
{% assign docs = site.notes %}
{% assign all = "" | split: "" %}

{% for d in docs %}
  {% if d.tags %}
    {% for t in d.tags %}
      {% assign all = all | push: t %}
    {% endfor %}
  {% endif %}
{% endfor %}

{% assign uniq = all | uniq %}

{% if uniq.size == 0 %}
- (태그 없음)
{% else %}

{% comment %}
태그 빈도 기반 정렬 + 워드클라우드.
Liquid에 hash/정렬이 불편해서 "00012::tag" 형태로 만들어 sort 후 reverse.
{% endcomment %}

{% assign pairs = "" | split: "" %}
{% assign max_count = 1 %}

{% for t in uniq %}
  {% assign count = 0 %}
  {% for d in docs %}
    {% if d.tags contains t %}
      {% assign count = count | plus: 1 %}
    {% endif %}
  {% endfor %}

  {% if count > max_count %}
    {% assign max_count = count %}
  {% endif %}

  {% capture padded %}00000{{ count }}{% endcapture %}
  {% assign padded = padded | slice: -5, 5 %}
  {% capture item %}{{ padded }}::{{ t }}{% endcapture %}
  {% assign pairs = pairs | push: item %}
{% endfor %}

{% assign pairs = pairs | sort | reverse %}

## 태그

{% assign featured = pairs | first %}
{% assign rest = pairs | shift %}

{% assign fparts = featured | split: "::" %}
{% assign fcount = fparts[0] | plus: 0 %}
{% assign ftag = fparts[1] %}

<div class="tag-cloud" aria-label="tag cloud">
  <div class="tag-featured">
    <a class="tag-pill featured" href="{{ site.baseurl }}/tags/{{ ftag | slugify }}/">
      {{ ftag }}
      <span class="tag-count">({{ fcount }})</span>
    </a>
  </div>

  <div class="tag-cloud-items">
    {% for item in rest %}
      {% assign parts = item | split: "::" %}
      {% assign count = parts[0] | plus: 0 %}
      {% assign t = parts[1] %}

      {% comment %}
      font-size scale: min 0.65rem (count=1) ~ max 1.55rem (count=max_count)
      {% endcomment %}
      {% assign denom = max_count | minus: 1 %}
      {% if denom <= 0 %}
        {% assign ratio = 100 %}
      {% else %}
        {% assign ratio = count | minus: 1 | times: 100 | divided_by: denom %}
      {% endif %}

      {% assign size = 65 | plus: ratio | times: 90 | divided_by: 100 | plus: 0 %}
      {% comment %} size = 65 + 0.90*ratio -> 65..155 (in "rem/100") {% endcomment %}

      <a class="tag-pill" style="font-size: {{ size | divided_by: 100.0 }}rem" href="{{ site.baseurl }}/tags/{{ t | slugify }}/">
        {{ t }}
        <span class="tag-count">({{ count }})</span>
      </a>
    {% endfor %}
  </div>
</div>

{% endif %}
